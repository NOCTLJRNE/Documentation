<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 10 - Channels Example | Komodo Documentation</title>
    <meta name="description" content="Documentation for developers building on Komodo">
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PC28587');</script>
  <link rel="icon" href="KMD_Mark_Black.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@komodoplatform">
  <meta name="twitter:title" content="Komodo Documentation">
  <meta name="twitter:description" content="Documentation for developers building on the Komodo Platform">
  <meta name="twitter:image" content="https://docs.komodoplatform.com/Dev_Docs_Introduction_small.png">
    <link rel="preload" href="/assets/css/0.styles.7c88946f.css" as="style"><link rel="preload" href="/assets/js/app.b45dc09f.js" as="script"><link rel="preload" href="/assets/js/3.f69df0a3.js" as="script"><link rel="preload" href="/assets/js/6.2478bcf7.js" as="script"><link rel="preload" href="/assets/js/151.29c90230.js" as="script"><link rel="prefetch" href="/assets/js/10.4572f463.js"><link rel="prefetch" href="/assets/js/100.40fbb18c.js"><link rel="prefetch" href="/assets/js/101.6af4e59d.js"><link rel="prefetch" href="/assets/js/102.e31d7917.js"><link rel="prefetch" href="/assets/js/103.7034e300.js"><link rel="prefetch" href="/assets/js/104.997595df.js"><link rel="prefetch" href="/assets/js/105.2ace76a7.js"><link rel="prefetch" href="/assets/js/106.57ad0375.js"><link rel="prefetch" href="/assets/js/107.d83caee0.js"><link rel="prefetch" href="/assets/js/108.2e314f33.js"><link rel="prefetch" href="/assets/js/109.c9fc1914.js"><link rel="prefetch" href="/assets/js/11.1647ab5d.js"><link rel="prefetch" href="/assets/js/110.71a9b184.js"><link rel="prefetch" href="/assets/js/111.ec462343.js"><link rel="prefetch" href="/assets/js/112.b6d7513f.js"><link rel="prefetch" href="/assets/js/113.b7455533.js"><link rel="prefetch" href="/assets/js/114.16f58847.js"><link rel="prefetch" href="/assets/js/115.c951fed5.js"><link rel="prefetch" href="/assets/js/116.abfa2c13.js"><link rel="prefetch" href="/assets/js/117.5836c950.js"><link rel="prefetch" href="/assets/js/118.caf68876.js"><link rel="prefetch" href="/assets/js/119.6c0473ed.js"><link rel="prefetch" href="/assets/js/12.bc88b130.js"><link rel="prefetch" href="/assets/js/120.c446d1e9.js"><link rel="prefetch" href="/assets/js/121.a3b8ae14.js"><link rel="prefetch" href="/assets/js/122.da410d03.js"><link rel="prefetch" href="/assets/js/123.a5711a72.js"><link rel="prefetch" href="/assets/js/124.bcfca29b.js"><link rel="prefetch" href="/assets/js/125.9786844d.js"><link rel="prefetch" href="/assets/js/126.ffb5aae0.js"><link rel="prefetch" href="/assets/js/127.d3b383af.js"><link rel="prefetch" href="/assets/js/128.4041f8ea.js"><link rel="prefetch" href="/assets/js/129.bd23dd41.js"><link rel="prefetch" href="/assets/js/13.cfa09791.js"><link rel="prefetch" href="/assets/js/130.53aa8c25.js"><link rel="prefetch" href="/assets/js/131.dc385931.js"><link rel="prefetch" href="/assets/js/132.18cd395a.js"><link rel="prefetch" href="/assets/js/133.750fec4f.js"><link rel="prefetch" href="/assets/js/134.c63f0a55.js"><link rel="prefetch" href="/assets/js/135.3fd4e914.js"><link rel="prefetch" href="/assets/js/136.87fd8e66.js"><link rel="prefetch" href="/assets/js/137.df5824ff.js"><link rel="prefetch" href="/assets/js/138.ddc4f4dc.js"><link rel="prefetch" href="/assets/js/139.0257e128.js"><link rel="prefetch" href="/assets/js/14.9a0ef1b6.js"><link rel="prefetch" href="/assets/js/140.79e8d0f0.js"><link rel="prefetch" href="/assets/js/141.54c1cca1.js"><link rel="prefetch" href="/assets/js/142.9d33d0a8.js"><link rel="prefetch" href="/assets/js/143.fd5186b5.js"><link rel="prefetch" href="/assets/js/144.8d090c95.js"><link rel="prefetch" href="/assets/js/145.482310b2.js"><link rel="prefetch" href="/assets/js/146.76608115.js"><link rel="prefetch" href="/assets/js/147.4697a04d.js"><link rel="prefetch" href="/assets/js/148.61c93f8d.js"><link rel="prefetch" href="/assets/js/149.d0ecdee5.js"><link rel="prefetch" href="/assets/js/15.775934fd.js"><link rel="prefetch" href="/assets/js/150.c40b8308.js"><link rel="prefetch" href="/assets/js/152.ce42968c.js"><link rel="prefetch" href="/assets/js/153.45df138c.js"><link rel="prefetch" href="/assets/js/154.c8ce6ca0.js"><link rel="prefetch" href="/assets/js/155.f9e7d3bb.js"><link rel="prefetch" href="/assets/js/156.24d7699b.js"><link rel="prefetch" href="/assets/js/157.749ee62a.js"><link rel="prefetch" href="/assets/js/158.ae507d61.js"><link rel="prefetch" href="/assets/js/159.2ac740ed.js"><link rel="prefetch" href="/assets/js/16.840d4b76.js"><link rel="prefetch" href="/assets/js/160.f95f0689.js"><link rel="prefetch" href="/assets/js/161.bc69da8f.js"><link rel="prefetch" href="/assets/js/162.f567e64d.js"><link rel="prefetch" href="/assets/js/163.47979ec0.js"><link rel="prefetch" href="/assets/js/164.e6511734.js"><link rel="prefetch" href="/assets/js/165.121da06f.js"><link rel="prefetch" href="/assets/js/166.91e5770e.js"><link rel="prefetch" href="/assets/js/167.22046637.js"><link rel="prefetch" href="/assets/js/168.458bdbe0.js"><link rel="prefetch" href="/assets/js/169.173b6a86.js"><link rel="prefetch" href="/assets/js/17.1c003429.js"><link rel="prefetch" href="/assets/js/170.52928465.js"><link rel="prefetch" href="/assets/js/171.182cdebf.js"><link rel="prefetch" href="/assets/js/172.89ab4eac.js"><link rel="prefetch" href="/assets/js/173.254a24aa.js"><link rel="prefetch" href="/assets/js/174.2850b702.js"><link rel="prefetch" href="/assets/js/175.70a5a337.js"><link rel="prefetch" href="/assets/js/176.0025470b.js"><link rel="prefetch" href="/assets/js/177.c7a1aff2.js"><link rel="prefetch" href="/assets/js/178.3dbd0e96.js"><link rel="prefetch" href="/assets/js/179.99ef0ff6.js"><link rel="prefetch" href="/assets/js/18.be01e508.js"><link rel="prefetch" href="/assets/js/180.b034e3e5.js"><link rel="prefetch" href="/assets/js/181.3b21ea4f.js"><link rel="prefetch" href="/assets/js/182.d2de8761.js"><link rel="prefetch" href="/assets/js/183.6ea28faa.js"><link rel="prefetch" href="/assets/js/184.8df54a71.js"><link rel="prefetch" href="/assets/js/185.5109fe23.js"><link rel="prefetch" href="/assets/js/186.701798f4.js"><link rel="prefetch" href="/assets/js/187.8fa52e8a.js"><link rel="prefetch" href="/assets/js/188.6900268d.js"><link rel="prefetch" href="/assets/js/189.68935789.js"><link rel="prefetch" href="/assets/js/19.477bedef.js"><link rel="prefetch" href="/assets/js/190.8165cb4b.js"><link rel="prefetch" href="/assets/js/191.aff0aa42.js"><link rel="prefetch" href="/assets/js/192.e3893b71.js"><link rel="prefetch" href="/assets/js/193.d40fc883.js"><link rel="prefetch" href="/assets/js/194.eaf5b7f8.js"><link rel="prefetch" href="/assets/js/195.dc81552e.js"><link rel="prefetch" href="/assets/js/196.0234393b.js"><link rel="prefetch" href="/assets/js/197.b66319a4.js"><link rel="prefetch" href="/assets/js/198.46710c6e.js"><link rel="prefetch" href="/assets/js/199.88c29a2a.js"><link rel="prefetch" href="/assets/js/20.5c68ffa0.js"><link rel="prefetch" href="/assets/js/200.0dec549f.js"><link rel="prefetch" href="/assets/js/201.5f3ed2a0.js"><link rel="prefetch" href="/assets/js/202.262fac24.js"><link rel="prefetch" href="/assets/js/203.6dcb091b.js"><link rel="prefetch" href="/assets/js/204.bad37cbf.js"><link rel="prefetch" href="/assets/js/205.1d965f8a.js"><link rel="prefetch" href="/assets/js/206.fdd59a5b.js"><link rel="prefetch" href="/assets/js/207.ec827389.js"><link rel="prefetch" href="/assets/js/208.a0985984.js"><link rel="prefetch" href="/assets/js/209.7108dcf0.js"><link rel="prefetch" href="/assets/js/21.e705e33d.js"><link rel="prefetch" href="/assets/js/210.c94d6c83.js"><link rel="prefetch" href="/assets/js/211.cedd57bc.js"><link rel="prefetch" href="/assets/js/212.0c18e63d.js"><link rel="prefetch" href="/assets/js/213.4e655100.js"><link rel="prefetch" href="/assets/js/214.ac5e924e.js"><link rel="prefetch" href="/assets/js/215.edaf9f32.js"><link rel="prefetch" href="/assets/js/216.cefff925.js"><link rel="prefetch" href="/assets/js/217.b630df92.js"><link rel="prefetch" href="/assets/js/218.423b4052.js"><link rel="prefetch" href="/assets/js/219.55e83f26.js"><link rel="prefetch" href="/assets/js/22.1bb18f23.js"><link rel="prefetch" href="/assets/js/220.ed39f01d.js"><link rel="prefetch" href="/assets/js/221.aba52b91.js"><link rel="prefetch" href="/assets/js/222.060fbea1.js"><link rel="prefetch" href="/assets/js/223.2c9bf02e.js"><link rel="prefetch" href="/assets/js/224.45196540.js"><link rel="prefetch" href="/assets/js/225.5f677ee1.js"><link rel="prefetch" href="/assets/js/226.bd89f669.js"><link rel="prefetch" href="/assets/js/227.c783d0b8.js"><link rel="prefetch" href="/assets/js/228.6f764182.js"><link rel="prefetch" href="/assets/js/229.1e0a3fe8.js"><link rel="prefetch" href="/assets/js/23.32b09af2.js"><link rel="prefetch" href="/assets/js/230.b54c7175.js"><link rel="prefetch" href="/assets/js/231.c3b80dc1.js"><link rel="prefetch" href="/assets/js/232.9e8489fd.js"><link rel="prefetch" href="/assets/js/233.14671514.js"><link rel="prefetch" href="/assets/js/234.112af4b4.js"><link rel="prefetch" href="/assets/js/235.26149635.js"><link rel="prefetch" href="/assets/js/236.6b95178b.js"><link rel="prefetch" href="/assets/js/237.bac395a3.js"><link rel="prefetch" href="/assets/js/238.6e05d10a.js"><link rel="prefetch" href="/assets/js/239.03b54cf7.js"><link rel="prefetch" href="/assets/js/24.541b58ea.js"><link rel="prefetch" href="/assets/js/240.7d794b7f.js"><link rel="prefetch" href="/assets/js/241.5d0fc429.js"><link rel="prefetch" href="/assets/js/25.ac53c80b.js"><link rel="prefetch" href="/assets/js/26.31d36ee1.js"><link rel="prefetch" href="/assets/js/27.6111bce5.js"><link rel="prefetch" href="/assets/js/28.22554980.js"><link rel="prefetch" href="/assets/js/29.87d70562.js"><link rel="prefetch" href="/assets/js/30.548d29f6.js"><link rel="prefetch" href="/assets/js/31.27dae480.js"><link rel="prefetch" href="/assets/js/32.e66392e6.js"><link rel="prefetch" href="/assets/js/33.be592a44.js"><link rel="prefetch" href="/assets/js/34.e4f30f71.js"><link rel="prefetch" href="/assets/js/35.179c80ca.js"><link rel="prefetch" href="/assets/js/36.565c979a.js"><link rel="prefetch" href="/assets/js/37.d9e0cb89.js"><link rel="prefetch" href="/assets/js/38.1bdffd14.js"><link rel="prefetch" href="/assets/js/39.beb72332.js"><link rel="prefetch" href="/assets/js/4.0e0987e2.js"><link rel="prefetch" href="/assets/js/40.3d916ea0.js"><link rel="prefetch" href="/assets/js/41.a965bcdb.js"><link rel="prefetch" href="/assets/js/42.30e61d2d.js"><link rel="prefetch" href="/assets/js/43.1a61c492.js"><link rel="prefetch" href="/assets/js/44.92379fb9.js"><link rel="prefetch" href="/assets/js/45.4bdbe3e5.js"><link rel="prefetch" href="/assets/js/46.a204951e.js"><link rel="prefetch" href="/assets/js/47.080592bd.js"><link rel="prefetch" href="/assets/js/48.48039b06.js"><link rel="prefetch" href="/assets/js/49.eb317332.js"><link rel="prefetch" href="/assets/js/5.b8dbd50e.js"><link rel="prefetch" href="/assets/js/50.2f899ca2.js"><link rel="prefetch" href="/assets/js/51.477c72a5.js"><link rel="prefetch" href="/assets/js/52.4cc89f54.js"><link rel="prefetch" href="/assets/js/53.f2643566.js"><link rel="prefetch" href="/assets/js/54.40455d37.js"><link rel="prefetch" href="/assets/js/55.a38c9502.js"><link rel="prefetch" href="/assets/js/56.dfd45c22.js"><link rel="prefetch" href="/assets/js/57.89bda7ed.js"><link rel="prefetch" href="/assets/js/58.c0b86ddc.js"><link rel="prefetch" href="/assets/js/59.d4f7a98e.js"><link rel="prefetch" href="/assets/js/60.97d4e85e.js"><link rel="prefetch" href="/assets/js/61.062b9602.js"><link rel="prefetch" href="/assets/js/62.563c0556.js"><link rel="prefetch" href="/assets/js/63.0f2ec49e.js"><link rel="prefetch" href="/assets/js/64.073a8f78.js"><link rel="prefetch" href="/assets/js/65.4dceed17.js"><link rel="prefetch" href="/assets/js/66.4ea52f7b.js"><link rel="prefetch" href="/assets/js/67.f8f5774b.js"><link rel="prefetch" href="/assets/js/68.90fc8ad2.js"><link rel="prefetch" href="/assets/js/69.21fd2b9f.js"><link rel="prefetch" href="/assets/js/7.a186170a.js"><link rel="prefetch" href="/assets/js/70.cc5f65a3.js"><link rel="prefetch" href="/assets/js/71.b50657c6.js"><link rel="prefetch" href="/assets/js/72.78e5edc7.js"><link rel="prefetch" href="/assets/js/73.b6ef20b3.js"><link rel="prefetch" href="/assets/js/74.9d987858.js"><link rel="prefetch" href="/assets/js/75.95d455a2.js"><link rel="prefetch" href="/assets/js/76.52f891e1.js"><link rel="prefetch" href="/assets/js/77.963eaaba.js"><link rel="prefetch" href="/assets/js/78.68193d46.js"><link rel="prefetch" href="/assets/js/79.d59f01a5.js"><link rel="prefetch" href="/assets/js/8.2d90373d.js"><link rel="prefetch" href="/assets/js/80.e9eadf55.js"><link rel="prefetch" href="/assets/js/81.32b0234d.js"><link rel="prefetch" href="/assets/js/82.1b71b4bc.js"><link rel="prefetch" href="/assets/js/83.97056fad.js"><link rel="prefetch" href="/assets/js/84.e5a33c2e.js"><link rel="prefetch" href="/assets/js/85.09bf9f72.js"><link rel="prefetch" href="/assets/js/86.a84a9689.js"><link rel="prefetch" href="/assets/js/87.08f7a859.js"><link rel="prefetch" href="/assets/js/88.944c95da.js"><link rel="prefetch" href="/assets/js/89.63d7353a.js"><link rel="prefetch" href="/assets/js/9.fe851079.js"><link rel="prefetch" href="/assets/js/90.64dec5a0.js"><link rel="prefetch" href="/assets/js/91.ec28f021.js"><link rel="prefetch" href="/assets/js/92.33c59dd5.js"><link rel="prefetch" href="/assets/js/93.5517c264.js"><link rel="prefetch" href="/assets/js/94.b537899f.js"><link rel="prefetch" href="/assets/js/95.3c37a7f8.js"><link rel="prefetch" href="/assets/js/96.d74aa316.js"><link rel="prefetch" href="/assets/js/97.c349a237.js"><link rel="prefetch" href="/assets/js/98.ade4fa04.js"><link rel="prefetch" href="/assets/js/99.52ceb137.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.f0a3d0e8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7c88946f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/KMD_Mark_White.png" alt="Komodo Documentation" class="logo"></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/basic-docs/smart-chains/introduction-to-smart-chain-documentation.html" class="nav-link">Smart Chain Essentials</a></div><div class="nav-item"><a href="/basic-docs/antara/introduction-to-antara.html" class="nav-link">Antara Framework</a></div><div class="nav-item"><a href="/basic-docs/atomicdex/introduction-to-atomicdex.html" class="nav-link">AtomicDEX</a></div><div class="nav-item"><a href="/komodo/installation.html" class="nav-link">Komodo</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li><li class="dropdown-item"><!----> <a href="/basic-docs/smart-chains/smart-chain-setup/nspv.html" class="nav-link">nSPV</a></li><li class="dropdown-item"><!----> <a href="/gui/agama/introduction.html" class="nav-link">Agama</a></li><li class="dropdown-item"><!----> <a href="/qa/debug-Komodo.html" class="nav-link">QA and Testing</a></li><li class="dropdown-item"><!----> <a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resources" class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/basic-docs/start-here/outline-for-new-developers.html" class="nav-link">Start Here</a></div><div class="nav-item"><a href="/basic-docs/smart-chains/introduction-to-smart-chain-documentation.html" class="nav-link">Smart Chain Essentials</a></div><div class="nav-item"><a href="/basic-docs/antara/introduction-to-antara.html" class="nav-link">Antara Framework</a></div><div class="nav-item"><a href="/basic-docs/atomicdex/introduction-to-atomicdex.html" class="nav-link">AtomicDEX</a></div><div class="nav-item"><a href="/komodo/installation.html" class="nav-link">Komodo</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cc-jl/introduction.html" class="nav-link">CC Book</a></li><li class="dropdown-item"><!----> <a href="/notary/setup-Komodo-Notary-Node.html" class="nav-link">Notary Nodes</a></li><li class="dropdown-item"><!----> <a href="/mmV1/introduction.html" class="nav-link">Marketmaker V1</a></li><li class="dropdown-item"><!----> <a href="/basic-docs/smart-chains/smart-chain-setup/nspv.html" class="nav-link">nSPV</a></li><li class="dropdown-item"><!----> <a href="/gui/agama/introduction.html" class="nav-link">Agama</a></li><li class="dropdown-item"><!----> <a href="/qa/debug-Komodo.html" class="nav-link">QA and Testing</a></li><li class="dropdown-item"><!----> <a href="/whitepaper/introduction.html" class="nav-link">Whitepaper</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Resources" class="dropdown-title"><span class="title">Resources</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/resources/list-all-KomodoPlatform-repos-links.html" class="nav-link">Komodo Platform</a></li><li class="dropdown-item"><!----> <a href="/resources/third-party-repos-resources.html" class="nav-link">Third Party</a></li></ul></div></div><div class="nav-item"><a href="https://komodoplatform.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KomodoPlatform.com
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/komodoplatform/Documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/cc-jl/introduction.html" class="sidebar-link">How to write UTXO based CC modules for KMD based chains - by jl777</a></li><li><a href="/cc-jl/chapter00.html" class="sidebar-link">Chapter 00 - Bitcoin Protocol Basics</a></li><li><a href="/cc-jl/chapter01.html" class="sidebar-link">Chapter 01 - OP_CHECKCRYPTOCONDITION</a></li><li><a href="/cc-jl/chapter02.html" class="sidebar-link">Chapter 02 - CC Contract Basics</a></li><li><a href="/cc-jl/chapter03.html" class="sidebar-link">Chapter 03 - CC vins and vouts</a></li><li><a href="/cc-jl/chapter04.html" class="sidebar-link">Chapter 04 - CC RPC Extensions</a></li><li><a href="/cc-jl/chapter05.html" class="sidebar-link">Chapter 05 - CC Validation</a></li><li><a href="/cc-jl/chapter06.html" class="sidebar-link">Chapter 06 - Faucet Example</a></li><li><a href="/cc-jl/chapter07.html" class="sidebar-link">Chapter 07 - Rewards Example</a></li><li><a href="/cc-jl/chapter08.html" class="sidebar-link">Chapter 08 - Assets Example</a></li><li><a href="/cc-jl/chapter09.html" class="sidebar-link">Chapter 09 - Dice Example</a></li><li><a href="/cc-jl/chapter10.html" class="active sidebar-link">Chapter 10 - Channels Example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/cc-jl/chapter10.html#the-following-are-the-rpc-calls" class="sidebar-link">The following are the rpc calls:</a></li><li class="sidebar-sub-header"><a href="/cc-jl/chapter10.html#vin-vout-allocation" class="sidebar-link">VIN/VOUT allocation</a></li></ul></li><li><a href="/cc-jl/chapter11.html" class="sidebar-link">Chapter 11 - Oracles Example</a></li><li><a href="/cc-jl/chapter12.html" class="sidebar-link">Chapter 12 - Limitless Possibilities</a></li><li><a href="/cc-jl/chapter13.html" class="sidebar-link">Chapter 13 - Different Languages</a></li><li><a href="/cc-jl/chapter14.html" class="sidebar-link">Chapter 14 - Runtime Bindings</a></li><li><a href="/cc-jl/chapter15.html" class="sidebar-link">Chapter 15 - RPC based dAPPS</a></li><li><a href="/cc-jl/faq.html" class="sidebar-link">Frequently asked Questions</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter-10-channels-example"><a href="#chapter-10-channels-example" class="header-anchor">#</a> Chapter 10 - Channels Example</h1> <p>It might be hard to believe, but channels CC implements an instant payment mechanism that is secured by dPoW in a way that is backward compatible with the existing wallets, explorers, etc. and channels CC does not require both nodes to be online. Its usecases are all the usecases for Lightning Network, it is just more secure, less expensive and backward compatible! The one aspect which some might consider a downside (and others another benefit) is that all payments are onchain. This means it would increase blockchain size, but the idea is for channels CC to be used on blockchains with relatively lower value coins, so a txfee of 0.0001 is not anything significant.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Very confusing blockchain reorganization issues described below. Will be confusing to most people</p></div> <p>From a distance, the blockchain is a chain of blocks. One block after the next, each referencing all the prior blocks. Each block containing a group of transactions. Prior to getting into a block, the transactions are broadcast to the network and if it is valid, it enters the memory pool. Each miner then constructs a valid block from these memory pool transactions and when a transaction gets mined (confirmed), it is removed from the memory pool.</p> <p>That is the simple version!</p> <p>The reality is quite a bit more complex, but the critical aspect is that the blockchain can (and is) reorganized as part of the expected protocol. This can happen even when there is no 51% attack happening and it is important to understand this process in detail, so here goes.</p> <p>What happens if two miners find a valid block at the same time? In this case the &quot;same time&quot; means within the time it takes for a block to propagate to the network. When a miner finds a new block, it is broadcast to the network and nodes update and start waiting for the next block. When there are two different (and valid) blocks propagating at the same time, some nodes update with one of the blocks and some the other, lets call it blockA and blockB. Now the nodes will know about both blockA and blockB, but some will consider blockA to be the chaintip and others will consider blockB to be the chaintip.</p> <p>This is where it gets confusing. Which is the correct chaintip (latest block?). It turns out that both blockA and blockB are valid at this moment in time. So there are actuall two blockchains. We have what is called a small fork! Now dont worry, the protocol will help us converge to a single chain, but in order to do that, we need the next block.</p> <p>Some miners will be mining from blockA and others from blockB. In most all cases, when the next block is found, it wont be at the &quot;same time&quot; again. So we will end up with a chain that is blockA+blockA2 or blockB+blockB2. Here comes the small reorg! Let's assuming blockA2 was found before blockB2, so that means all nodes that had blockB as the chaintip now see a longer chain blockA+blockA2, which trumps blockB. When that happens, it reorgs the chain so it is on blockA+blockA2. To do this properly, all the transactions that were in blockB are put back into the mempool and blockA is added, then blockA2.</p> <p>Of course, when blockB2 arrives, the nodes see it but blockB+blockB2 is the same length as blockA+blockA2, so no reorg happens. Since we postulated that blockAs arrived &quot;before&quot; blockB2, that means all nodes are on the same chaintip, including all the miners and the next block found would be blockA3, without any complications.</p> <p>Believe it or not, this sort of thing is happening all the time, one all blockchains. The chaintip is a volatile thing and that is why more than one confirmation is needed to avoid the small reorgs invalidating blockhash. However, it is possible for more than just the blockhash to change. When the reorg happens, all the transactions in the block are put back into the mempool and then the new blocks are processed in order. So what happens if one of the inputs to a transaction that happened in blockB, gets spent in blockA2? Based on random utxo allocation by wallets this is not impossible if an address has a lot of activity, but if it is part of a 51% attack, then this remote chance of an utxo being spent becomes a certainity! In fact, that is what a 51% attack is.</p> <p>The attack can go much deeper than just one block. For chains that use the longest chain rule, it can go quite deep indeed. So as all the reorged transactions are put back into the mempool, we feel good that it will get confirmed again. Unfortunately, there is no enforcement of a miner needing to mine any specific transaction in the mempool. And the 51% attacker is intent on mining the transaction that spends an already spent utxo in the reorganized chain. it is called a double spend, but in the reorganized chain, it is spent only once. So it is a bit of a misnomer.</p> <p>The important thing to understand is that if any transaction has inputs that are signed by a node, it is possible when the chain reorganizes for that transaction to become invalid. This is why dPoW is important as it doesnt strictly use the longest chain rule, but rather the longest notarized chain rule. Once a block is notarized, then it will refuse to reorganize that block (or any block before). So the risk is still there, but only until a notarization. Please see more detailed information about dPoW <code>here</code>.</p> <p>Given the above, if you are wondering how can it be possible to have a mempool payment be secured by dPoW. Since it is explained how the reorgs can make valid transactions disappear, it seems unlikely any such solution is possible. However, the CC is very powerful and it can make unlikely things possible.</p> <p>The following describes how.</p> <p>We know that any payment that is utxo based can be invalidated via 51% attack, or even an unlikely but not impossible random utxo allocation from a busy wallet. Which means the payment cant be via a utxo. Since the CC system is utxo based, you might think that it means CC cant solve this. However, CC is very powerful and can implement payments that are not utxo based. But before this non-utxo payment method is explained, first we need to solve the mechanics of payment.</p> <p>At a high level, we want to lock funds into a channel, have this lock notarized so it cant be reorganized. Then payments can unlock funds. Additionally, if we are restricting the payment to just one destination, we also need a way for the sender to reclaim the unused funds. So there needs a way for a close channel notification, which when notarized allows the sender to reclaim all funds. After the channel close is notarized, then the only action possible should be a reclaim of sender funds.</p> <p>We need to assume that any payment, channel close, reclaim can be reorganized until it is notarized so great care needs to be made that a payment that is made will always be valid. With some allowances for blocks after a channelclose is notarized, we can protect the payments using the logic of &quot;stop accepting payments after a channelclose is seen&quot;. It might be that a full notarization of wait time after the channelclose is notarized is needed to provide sufficient time for all the payments to be reprocessed.</p> <p>Now we can finally describe the requirements for the CC. The locked funds need to be able to be spent by either the sender or receiver, the former only after sufficient time after a channelclose and the latter only after a payment is seen (not just confirmed, but just seeing it should be enough). The protection from reorgs is that the payment itself reveals a secret that is needed for the payment and only the secret would be needed, so it wont matter what utxo is used. To lock funds into a CC address that can handle this we need a 1of2 CC address, which can accept a signature from either of two pubkeys. The additional CC constraints would be enforced to make sure payments are made until the channel is closed.</p> <p>A hashchain has the nice property of being able to encode a lot of secrets with a single hash. You can hash the hash, over and over and the final hash is the public value. By revealing the next to last hash, it can be verified that it hashes to the final hash. There is a restriction that a hashchain needs to be of reasonable maximum depth, say 1000. That means each iteration of the hashchain that is revealed is worth 1/1000th the total channelfunds. In fact, if the 500th hash value is revealed, half the channelfunds are released. this allows 1/1000th resolution that can be released with a single hash value.</p> <p>Now we can make the payment based on the hashvalue revealed at a specified depth before the prior released hashchain value. Both the sender and receiver can make a payment to the destination by attaching a hashchain secret. This means even if the sender's payment is reorganized, if the destination has the revealed secret, a replacement payment can be made that is valid. If the destination account isnt monitoring the blockchain, then it wont see the revealed secret, but in this case there shouldnt be value released for the payments that are reorganized. So it would be a case of no harm, no foul. In any event, all the payments end up verifiable on the blockchain to provide verifiability.</p> <p>Payments at the speed of the mempool, protected by dPoW!</p> <h2 id="the-following-are-the-rpc-calls"><a href="#the-following-are-the-rpc-calls" class="header-anchor">#</a> The following are the rpc calls:</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>channelsopen
channelspayment
channelsclose
channelsrefund
channelsinfo
</code></pre></div><h3 id="channelsopen"><a href="#channelsopen" class="header-anchor">#</a> channelsopen:</h3> <p>Used to open channel between two pub keys (sender and receiver). Parameters: <code>destination_pubkey</code>, <code>total_number_of_payments</code>, <code>payment_denomination</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Example - channelsopen 03a8fe537de2ace0d9c210b0ff945085c9192c9abf56ea22f22ce7998f289bb7bb <span class="token number">10</span> <span class="token number">10000000</span>
</code></pre></div><h3 id="channelspayment"><a href="#channelspayment" class="header-anchor">#</a> channelspayment:</h3> <p>Sending payment to receiver. Condition is that the channel open tx is confirmed/notarised. Parameters: <code>open_tx_id</code>, <code>payment_amount</code>, <code>[secret]</code> (optional, used when receiver needs to make a payment which secret has already been revealed by sender).</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Example - channelspayment b9c141facc8cb71306d0de8e525b3de1450e93e17fc8799c8fda5ed52fd14440 <span class="token number">20000000</span>
</code></pre></div><h3 id="channelsclose"><a href="#channelsclose" class="header-anchor">#</a> channelsclose:</h3> <p>Marking channel as closed. This RPC only creates a tx which says that the channel is closed and will be used in refund RPC to withdraw funds from closed channel. This also notifies receiver that channel fund could be withdrawn, but the payment RPC is still available until all funds are withdrawn. Parameters: <code>open_tx_id</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>Example - channelsclose b9c141facc8cb71306d0de8e525b3de1450e93e17fc8799c8fda5ed52fd14440
</code></pre></div><h3 id="channelsrefund"><a href="#channelsrefund" class="header-anchor">#</a> channelsrefund:</h3> <p>Withdrawing funds back to senders address. Refund can be issued only when channel close tx is confirmed/notarised. Parameters: <code>open_tx_id</code>, <code>close_tx_id</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code>Example - channelsrefund b9c141facc8cb71306d0de8e525b3de1450e93e17fc8799c8fda5ed52fd14440 bb0ea34f846247642684c7c541c435b06ee79e47893640e5d2e51023841677fd
</code></pre></div><h3 id="channelsinfo"><a href="#channelsinfo" class="header-anchor">#</a> channelsinfo:</h3> <p>Getting info about channels in which the issuer is involved, either as sender or receiver. Call without parameters give the list of available channels. Parameters: <code>[open_tx_id]</code> (optional - used to get info about specific channel)</p> <h2 id="vin-vout-allocation"><a href="#vin-vout-allocation" class="header-anchor">#</a> VIN/VOUT allocation</h2> <h3 id="open"><a href="#open" class="header-anchor">#</a> Open:</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vout.0: CC vout <span class="token keyword">for</span> channel funding on CC1of2 pubkey
vout.1: CC vout marker to senders pubKey
vout.2: CC vout marker to receiver pubkey
vout.n-2: normal change
vout.n-1: opreturn - <span class="token string">'O'</span> zerotxid senderspubkey receiverspubkey totalnumberofpayments paymentamount hashchain
</code></pre></div><h3 id="payment"><a href="#payment" class="header-anchor">#</a> Payment:</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: CC input from channel funding
vin.2: CC input from src marker
vout.0: CC vout change to channel funding on CC1of2 pubkey
vout.1: CC vout marker to senders pubKey
vout.2: CC vout marker to receiver pubkey
vout.3: normal output of payment amount to receiver pubkey
vout.n-2: normal change
vout.n-1: opreturn - <span class="token string">'P'</span> opentxid senderspubkey receiverspubkey depth numpayments secret
</code></pre></div><h3 id="close"><a href="#close" class="header-anchor">#</a> Close:</h3> <div class="language-bash extra-class"><pre class="language-bash"><code> vin.0: normal input
 vin.1: CC input from channel funding
 vin.2: CC input from src marker
 vout.0: CC vout <span class="token keyword">for</span> channel funding
 vout.1: CC vout marker to senders pubKey
 vout.2: CC vout marker to receiver pubkey
 vout.n-2: normal change
 vout.n-1: opreturn - <span class="token string">'C'</span> opentxid senderspubkey receiverspubkey <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
</code></pre></div><h3 id="refund"><a href="#refund" class="header-anchor">#</a> Refund:</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>vin.0: normal input
vin.1: CC input from channel funding
vin.2: CC input from src marker
vout.0: CC vout marker to senders pubKey
vout.1: CC vout marker to receiver pubKey
vout.2: normal output of CC input to senders pubkey
vout.n-2: normal change
vout.n-1: opreturn - <span class="token string">'R'</span> opentxid senderspubkey receiverspubkey numpayments payment closetxid
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/komodoplatform/Documentation/edit/master/docs/cc-jl/chapter10.md" target="_blank" rel="noopener noreferrer">Suggest an improvement for this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/cc-jl/chapter09.html" class="prev">Chapter 09 - Dice Example</a></span> <span class="next"><a href="/cc-jl/chapter11.html">Chapter 11 - Oracles Example</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b45dc09f.js" defer></script><script src="/assets/js/3.f69df0a3.js" defer></script><script src="/assets/js/6.2478bcf7.js" defer></script><script src="/assets/js/151.29c90230.js" defer></script>
  </body>
</html>
